"use strict"; if (typeof __JSWRAPPER === 'undefined' || (!__JSWRAPPER.initialized())) {
     if ((typeof ServiceWorkerContainer !== 'undefined' && self instanceof ServiceWorkerContainer) || (typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope)) {
         importScripts('https://mcas-proxyweb.mcas.ms/js-bootstrap.js?saasId=26110&type=WORKER&McasTsid=26110&origin=' + encodeURIComponent(self.origin ? self.origin : location.origin));
     } else {
         /* eslint-disable */
         eval(function () {
             var x = (typeof __caac__ !== "undefined" && typeof __caac__.xhr !== "undefined") ? new __caac__.xhr() : new XMLHttpRequest();
             x.open = (typeof __caac__ !== "undefined" && typeof __caac__.xhro !== "undefined") ? __caac__.xhro : x.open;
             x.send = (typeof __caac__ !== "undefined" && typeof __caac__.xhrs !== "undefined") ? __caac__.xhrs : x.send;
             x.open('GET', 'https://mcas-proxyweb.mcas.ms/js-bootstrap.js?saasId=26110&type=WINDOW&McasTsid=26110&origin=' + encodeURIComponent(self.origin ? self.origin : location.origin), false);
             x.withCredentials = true;
             x.send();
             return x.responseText;
         }());
         /* eslint-enable */
     }
}define("Repos/ContentPreview/Markdown",["require","exports","VSS/Core/Observable","VSS/Features/Markdown/Utils/UserContentAnchorHelper","VSS/Platform/Context","VSS/Platform/FPS","VSS/Platform/Util/Url","Repos/Common/VCViewModelDataProviderService","Mention/MarkdownWithAutocomplete/Components","react","VSS/Platform/Components/Performance","VSS/Platform/Layout","VSSUI/Observer","VSSUI/Util"],(function(e,t,r,n,o,i,s,a,c,l,h,g,m,v){var p;!function(e){p=t[e]={};class c extends o.VssService{constructor(){super(...arguments),this.anchor=new r.ObservableValue("")}_serviceStart(e){super._serviceStart(e);e.getService("IPageStateHistoryService").registerObservable(this.anchor,"anchor",0)}navigateToAnchorFromHistory(){const e=this.pageContext.getService("IPageStateHistoryService").getProjectedState();this.navigateToAnchor(e.anchor||"")}navigateToAnchor(e){e=encodeURIComponent(e);let t=document.getElementById(e);t||(t=document.getElementById(n.UserContentAnchorHelper.convertAnchorName(e))),t&&t.scrollIntoView()}getAnchor(){return this.anchor}setAnchor(e){this.anchor.value=e}setRelativePath(e,t){const r=this.pageContext.getService("IPageStateHistoryService").getProjectedState().path;e=this.normalizePath(e,r);const n=(0,a.getGitRepository)(this.pageContext),o=this.pageContext.getService("IReposRoutingService").getFilesUrl(n.name,n.project.name,e,void 0,t);(0,i.FastPageSwitch)(this.pageContext,o,!0)}normalizePath(e,t="/"){const r=t.lastIndexOf("/");return r>=0&&(t=t.substring(0,r)),"/"!==t.charAt(0)&&(t="/"+t),e.startsWith("./")?e=(0,s.combineUrlPaths)(t,e.substr("./".length)):e.startsWith("/")||(e=(0,s.combineUrlPaths)(t,e)),e}}const l="IMarkdownLinkingService";o.Services.add(l,{serviceFactory:c}),t[e].getService=function(e){return e.getService(l)}}("MarkdownLinkingService"),function(e){t.ComponentsMarkdownPreview={};class r extends g.VssComponent{constructor(){super(...arguments),this.linkClickHandler=e=>{if(e.ctrlKey||e.metaKey||e.shiftKey||0!==e.button)return!0;const t=e.target.getAttribute("href");if(t){if(this.props.linkParse){const e=this.props.linkParse(t);if(e)return e.path?(0,p.getService)(this.context.pageContext).setRelativePath(e.path,e.anchor):(0,p.getService)(this.context.pageContext).setAnchor(e.anchor),!1}if(t.startsWith("#"))return(0,p.getService)(this.context.pageContext).setAnchor(t.substr(1)),!1;if(t.indexOf("://")<0)return(0,p.getService)(this.context.pageContext).setRelativePath(t),!1}return!0}}render(){return l.createElement(h.PerformanceScenarioContext.Consumer,null,(e=>{const t=e.registerPendingWork("render-markdown"),{context:r={},options:n,rawContent:o,imageUrlTransformer:i,linkTransformer:s}=this.props,a={className:(0,v.css)(this.props.className,"markdown-preview-container scroll-hidden"),linkClickHandler:this.linkClickHandler,onInitialRender:()=>{this.setTimeout((()=>(0,p.getService)(this.context.pageContext).navigateToAnchorFromHistory()),500);const{onInitialRender:e}=this.props;e&&e(),t&&t.complete()},options:Object.assign(Object.assign({},n),{enableHeaderAnchorSharing:!0,enableYaml:!0,html:!0,imageUrlTransformer:i,linkTransformer:s}),value:o||r.content||""};return l.createElement(l.Fragment,null,l.createElement(m.Observer,{anchor:(0,p.getService)(this.context.pageContext).getAnchor()},(e=>((0,p.getService)(this.context.pageContext).navigateToAnchor(e.anchor),null))),l.createElement(c.MarkdownPreviewWithAutocomplete,Object.assign({},a)))}))}}g.VssComponent.register("ms.vss-code-web.markdown-preview",r)}()}),["MarkdownLinkingService","Components/MarkdownPreview"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-code-web.markdown-preview-content"}}));