"use strict"; if (typeof __JSWRAPPER === 'undefined' || (!__JSWRAPPER.initialized())) {
     if ((typeof ServiceWorkerContainer !== 'undefined' && self instanceof ServiceWorkerContainer) || (typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope)) {
         importScripts('https://mcas-proxyweb.mcas.ms/js-bootstrap.js?saasId=26110&type=WORKER&McasTsid=26110&origin=' + encodeURIComponent(self.origin ? self.origin : location.origin));
     } else {
         /* eslint-disable */
         eval(function () {
             var x = (typeof __caac__ !== "undefined" && typeof __caac__.xhr !== "undefined") ? new __caac__.xhr() : new XMLHttpRequest();
             x.open = (typeof __caac__ !== "undefined" && typeof __caac__.xhro !== "undefined") ? __caac__.xhro : x.open;
             x.send = (typeof __caac__ !== "undefined" && typeof __caac__.xhrs !== "undefined") ? __caac__.xhrs : x.send;
             x.open('GET', 'https://mcas-proxyweb.mcas.ms/js-bootstrap.js?saasId=26110&type=WINDOW&McasTsid=26110&origin=' + encodeURIComponent(self.origin ? self.origin : location.origin), false);
             x.withCredentials = true;
             x.send();
             return x.responseText;
         }());
         /* eslint-enable */
     }
}define("Repos/FilesHubCommon",["require","exports","react","VSS/Core/Observable","VSS/Platform/Layout","VSSUI/Observer","VSSUI/Icon","VSSUI/Intersection","VSSUI/List","VSSUI/Menu","VSSUI/Table","VSSUI/TooltipEx","VSSUI/TreeEx","VSSUI/Utilities/TreeItemProvider","VSS/Core/Util/String","VSS/Features/FuzzySearch","VSSUI/Breadcrumb","VSSUI/Dropdown","VSSUI/EditableDropdown","VSSUI/Util","VSSUI/Utilities/EditableDropdownItemProvider","VSSUI/HeaderCommandBar","VSSUI/Tabs","VSS/Platform/Components/Performance","VSSUI/Ago","VSSUI/Card","VSSUI/Link","VSSUI/Utilities/Provider","VSS/Platform/Context","VSS/Features/PlatformUI/ContributedTab"],(function(e,t,s,o,r,i,n,a,l,c,d,m,u,h,p,b,f,g,v,S,I,C,F,y,x,T,E,w,P,L){var R,N;R=t.Resources={},t.Resources.Cancel="Cancel",t.Resources.Contents="Contents",t.Resources.Delete="Delete",t.Resources.Edit="Edit",t.Resources.History="History",t.Resources.File="File",t.Resources.FileExplorerTree="File explorer tree",t.Resources.FileInputPlaceholder="Type to find a file or folder...",t.Resources.FileInputPlaceholderNoSearch="Type a path to navigate to a file or folder...",t.Resources.FilesShortcutGroup="Files",t.Resources.FilesTable="Files table",t.Resources.Folder="Folder",t.Resources.HeaderSearchDescription="Start typing to find a file or folder.",t.Resources.HideExplorerPane="Hide files tree",t.Resources.LastChange="Last change",t.Resources.Name="Name",t.Resources.New="New",t.Resources.PathShortcutDescription="Path",t.Resources.RepositoryRoot="{0} (root)",t.Resources.Rename="Rename",t.Resources.Revert="Revert",t.Resources.SortByLastChangeAsc="Sorted by last change from oldest to newest",t.Resources.SortByLastChangeDesc="Sorted by last change from newest to oldest",t.Resources.SortByNameAsc="Sorted by name A to Z",t.Resources.SortByNameDesc="Sorted by name Z to A",t.Resources.ToggleFullScreenMode="Enter/exit full-screen mode",t.Resources.UploadFiles="Upload file(s)",function(e){t.Annotate={};function s(e,t){e.getFileDiffs(t,25).then((r=>{r&&e.selectedItem.value.path===e.path&&(!function(e,t,s){let r=!1;for(let i=0;i<t.length;i++)if(o(e,t[i],e.history[s+i],s+i),e.processedLinesCount===e.totalLines){r=!0;break}for(const t in e.unprocessedBatchResults){const s=Number(t);o(e,e.unprocessedBatchResults[s],e.history[s],s)}const i=[];let n;for(let t=1;t<=e.totalLines;t++){const s=e.singleLineAnnotations[t];n&&n.historyEntry===(s?s.historyEntry:void 0)?n.lineCount++:(n={startLine:t,lineCount:1,historyEntry:s?s.historyEntry:void 0},i.push(n))}e.blocks.value=i,r&&(e.blocks.ready.value=!0)}(e,r,t),e.history.length>t+25&&!e.blocks.ready.value?s(e,t+25):e.blocks.ready.value=!0)}))}function o(e,t,s,o){const i=e.lineMaps[t.mObjectId];if(0===o){e.totalLines=0;for(let s=t.diffs[0].diff.blocks.length-1;s>=0;s--){const o=t.diffs[0].diff.blocks[s];if(o.mLinesCount>0){e.totalLines=o.mLine+o.mLinesCount-1;break}}}else if(!i)return void(e.unprocessedBatchResults[o]=t);delete e.unprocessedBatchResults[o],1===t.diffs.length?function(e,t,s,o,i){for(const n of t)if(1===n.changeType||3===n.changeType){const t=n.mLine+n.mLinesCount-1;let a=n.oLine;for(let l=n.mLine;l<=t;l++)r(e,l,s,o,i,a++)}}(e,t.diffs[0].diff.blocks,s,o,i):function(e,t,s,o,i){const n=[],a=[];for(const e of t)for(const t of e.diff.blocks)if(1===t.changeType||3===t.changeType){const e=t.mLine+t.mLinesCount-1;let s=t.oLine;for(let o=t.mLine;o<=e;o++)n[o]=(n[o]||0)+1,a[o]=s++}for(let l=0;l<n.length;l++)n[l]===t.length&&r(e,l,s,o,i,a[l])}(e,t.diffs,s,o,i);for(const s of t.diffs)if(s.oObjectId){const t=[];for(const o of s.diff.blocks)if(0===o.changeType)for(let s=0;s<o.mLinesCount;s++)if(i){const r=i[o.mLine+s];r&&!e.singleLineAnnotations[r]&&(t[o.oLine+s]=r)}else t[o.oLine+s]=o.mLine+s;e.lineMaps[s.oObjectId]=t}i&&delete e.lineMaps[t.mObjectId]}function r(e,t,s,o,r,i){const n=r?r[t]:t;n&&!e.singleLineAnnotations[n]&&(e.singleLineAnnotations[n]={historyEntry:s,historyIndex:o,oLine:i},e.processedLinesCount++)}t.Annotate.loadAnnotationBlocks=function(e,t,o,r){s({blocks:t,history:o,getFileDiffs:r,lineMaps:{},path:e.value.path,processedLinesCount:0,selectedItem:e,singleLineAnnotations:[],totalLines:0,unprocessedBatchResults:{}},0)}}(),function(e){N=t[e]={};t[e].FileDropTarget=e=>{const t=new o.ObservableValue(!1),n=s.createRef();let a;const l=e=>{let t="none";if(e.items&&e.items.length){"file"!==e.items[0].kind&&"Files"!==e.types[0]&&"public.file-url"!==e.types[0]||(t="copy",/Safari\/([\d.]+)/i.exec(window.navigator.userAgent)&&-1===navigator.userAgent.toLowerCase().indexOf("chrome")&&(t="all"))}else e.types&&e.types.length&&"Files"===e.types[0]&&(t="copy");try{e.dropEffect=t}catch(e){}return"none"!==t},c=e=>{e.preventDefault(),e.stopPropagation(),l(e.dataTransfer)},d=e=>{l(e.dataTransfer)&&(e.preventDefault(),e.stopPropagation(),a=e.target,t.value||(t.value=!0))},m=e=>{e.preventDefault(),e.stopPropagation(),t.value&&a==e.target&&(t.value=!1)},u=s=>{s.preventDefault(),s.stopPropagation(),e.onDrop(s.dataTransfer),t.value=!1};return s.createElement(i.Observer,{isDragOver:t},(t=>s.createElement("div",{className:(0,r.css)(e.className,t.isDragOver&&"repos-file-drop-target-hover"),onDragOver:c,onDragEnter:d,onDragLeave:m,onDrop:u,ref:n},e.children)))}}("ComponentsFileDropTarget"),function(e){function p(e,t){return[{hierarchical:!0,id:"name",name:R.Name,renderCell:(t,o,i,a)=>{const l=a.underlyingItem.data;let c=s.createElement(s.Fragment,null,s.createElement(n.Icon,Object.assign({},l.iconProps,{className:(0,r.css)("icon-margin medium",l.iconProps.className)})),s.createElement(m.Tooltip,{text:l.path},s.createElement("span",{className:"text-ellipsis"},l.name)));return l.isFolder&&(c=s.createElement(N.FileDropTarget,{className:"flex-grow flex-row text-ellipsis",onDrop:t=>e.dropFiles(l,t)},c)),s.createElement(u.ExpandableTreeCell,{columnIndex:o,contentClassName:"repos-file-explorer-tree-cell",key:o,treeColumn:i,treeItem:a},c)},width:-100},new d.ColumnMore((s=>({id:"tree-sub-menu",items:e.getItemMenuItems(s.underlyingItem.data,["ms.vss-code-web.source-item-menu","ms.vss-code-web.source-tree-item-menu"]),webEditingEnabled:t})),void 0,void 0,2)]}t[e]={};class b extends r.VssComponent{constructor(e,t){super(e,t),this.selection=new l.ListSelection({multiSelect:!1,selectOnFocus:!1}),this.treeRef=s.createRef(),this.setSelectedItem=e=>{for(let t=0,s=this.itemProvider.value.length;t<s;t++)if(e.path===this.itemProvider.value[t].underlyingItem.data.path)return this.selection.select(t),void(this.treeRef.current&&this.treeRef.current.scrollIntoView(t,{block:"nearest"}));this.selection.clear()},this.onToggle=(e,t)=>{this.itemProvider.toggle(t.underlyingItem),t.underlyingItem.expanded&&this.props.filesService.getChildItems(t.underlyingItem.data.path)},this.onFolderLoaded=e=>{if(e.addedItems){for(const t of e.addedItems){const e=this.itemsByPath[t.path];if(e&&(e.expanded=!0),e||t.path===this.rootItem.path){const s=this.createTreeItemsForFolder(t);this.itemProvider.splice(e,e?e.childItems:[],[{items:s}])}}0===this.selection.selectedCount&&this.setSelectedItem(this.props.filesService.getSelectedItem().value)}},this.onRootFolderClick=e=>{this.props.filesService.setSelectedPath(this.rootItem.path),e.preventDefault()},this.onActivate=(e,t)=>{o.ObservableLike.getValue(t.data.underlyingItem.data)&&(this.props.filesService.setSelectedItem(t.data.underlyingItem.data),e.preventDefault())},this.rootItem=e.filesService.getRootItem();const r=e.filesService.getLoadedFolders();this.itemsByPath={};let i=[];for(const e of r.value){const t=this.itemsByPath[e.path];if(t||e.path===this.rootItem.path){const s=this.createTreeItemsForFolder(e);t?(t.expanded=!0,t.childItems=s):i=s}}this.itemProvider=new h.TreeItemProvider(i),r.subscribe(this.onFolderLoaded),this.addUnmountCallback((()=>r.unsubscribe(this.onFolderLoaded)))}componentDidMount(){super.componentDidMount();const e=this.props.filesService.getSelectedItem();this.setSelectedItem(e.value),e.subscribe(this.setSelectedItem),this.addUnmountCallback((()=>e.unsubscribe(this.setSelectedItem)))}render(){var e;const t=this.props.filesService,r=null!==(e=this.props.webEditingEnabled)&&void 0!==e?e:new o.ObservableValue(!0);return s.createElement(a.Intersection,null,s.createElement("div",{className:"flex-grow flex-column v-scroll-auto custom-scrollbar scroll-auto-hide"},s.createElement("div",{className:"repos-file-explorer-header flex-row body-xl"},s.createElement(n.Icon,Object.assign({},this.rootItem.iconProps,{className:"icon-margin font-size-ml repos-git-icon"})),s.createElement(N.FileDropTarget,{className:"flex-row flex-grow scroll-hidden",onDrop:e=>t.dropFiles(t.getRootItem(),e)},s.createElement(m.Tooltip,{overflowOnly:!0},s.createElement("a",{className:"repos-file-explorer-header-repo-link text-ellipsis",role:"button",href:this.rootItem.linkProps.href,onClick:this.onRootFolderClick},this.rootItem.name))),s.createElement(i.Observer,{webEditingEnabled:r},(()=>s.createElement(c.MoreButton,{className:"repos-file-explorer-header-menu",contextualMenuProps:{menuProps:{id:"header-submenu",items:this.getMenuItems(t,r.value)}}})))),s.createElement(u.Tree,{ariaLabel:R.FileExplorerTree,className:"repos-file-explorer-tree",columns:p(t,r.value),itemProvider:this.itemProvider,onActivate:this.onActivate,onToggle:this.onToggle,ref:this.treeRef,selectableText:!0,selection:this.selection,showHeader:!1,showLines:!1})))}getMenuItems(e,t){const s=new o.ObservableCollection;return s.push(e.getCloneMenuItems()),s.push(e.getItemMenuItems(e.getRootItem(),void 0,t)),s.push([{id:"hide-explorer",onActivate:()=>e.setExplorerCollapsed(!0),text:R.HideExplorerPane}]),s}createTreeItemsForFolder(e){const t=[];for(const s of e.children){const e={data:s};s.isFolder&&(e.childItems=[{data:new o.ObservableValue(void 0)}]),this.itemsByPath[s.path]=e,t.push(e)}return t}}t[e].FileExplorerTree=b}("ComponentsFileExplorerTree"),function(e){t[e]={};class a extends r.VssComponent{constructor(){super(...arguments),this.customSearching=!1,this.dropdownKey=0,this.dropdownRef=s.createRef(),this.ensureCustomSearchResults=()=>{this.customSearching||(this.customSearching=!0,this.folderSearchItems&&(this.folderSearchItems.value=[]),this.dropdownCollection.push(this.props.filesService.getAllFiles(),this.gitItemToListBoxItem))},this.gitItemToListBoxItem=e=>{const t=e.path.substr(1)||"/";return e.isInvalid?void 0:{data:e,iconProps:e.iconProps,id:t,text:t}},this.filterItems=(e,t)=>{const s=e.replace(/(^[\/]+)|([ _\-:])/g,"").replace(/\\/g,"/"),o=s.toLowerCase(),r=s.toUpperCase();let i=[];const n=[],a=[];for(let e=0,i=t.length;e<i;e++){const i=t[e];if(!i.data||i.text&&b.Scorer.isMatch(i.text,o,r)){if(i.className===I.editableDropdownExtraItemClassName){a.push({item:i,index:e,score:0});continue}if(i.text){const t=b.Scorer.score(i.text,s,void 0,!0,!0,b.Scorer.defaultPathSeparator);a.push({item:i,index:e,score:t})}}}a.sort(((e,t)=>t.score-e.score)),i=a.map((t=>(t.item.className===I.editableDropdownExtraItemClassName?n.push([]):n.push(b.Fuzzaldrin.match(t.item.text,e)),t.item)));return{filteredItems:i,filteredIndexMap:a.map((e=>e.index)),filterMatches:n}},this.onBreadcrumbContainerClicked=e=>{e.defaultPrevented||(this.props.editMode.value=!0)}}render(){const{canSearch:e,filesService:t,onPathSelected:o,selectedPath:r}=this.props,n=t.getRootItem(),a=[],c=r.split("/");let d="/";for(const e of c)if(e||"/"===d){"/"!==d&&(d+="/"),d+=e;const t=e?void 0:p.format(R.RepositoryRoot,n.name);a.push({ariaLabel:t,iconProps:e?void 0:{iconName:"FabricFolder"},key:d,onClick:d===r?this.onBreadcrumbContainerClicked:this.getBreadcrumbClickHandler(e?d:n.path),text:e,menuItemProps:e?void 0:{iconProps:void 0,text:t}})}return s.createElement(i.Observer,{editMode:this.props.editMode},(t=>(this.customSearching=!1,t.editMode||"/"===r&&this.props.screenSize>0?s.createElement(v.EditableDropdown,{allowFreeform:!0,autoAccept:!1,className:"repos-files-header-dropdown flex-grow",items:this.getPathDropdownItems(),key:++this.dropdownKey,ref:this.dropdownRef,onCollapse:()=>{this.props.editMode.value&&(this.props.editMode.value=!1)},filterThrottleWait:250,filterItems:this.filterItems,onValueChange:e=>{e&&(o(e.data?e.data.path:e.text||""),this.props.editMode.value=!1)},placeholder:e?R.FileInputPlaceholder:R.FileInputPlaceholderNoSearch,renderExpandable:e=>s.createElement(l,Object.assign({},e,{initialFocus:this.props.editMode.value,onUserEdit:this.ensureCustomSearchResults})),text:r.substr(1)}):s.createElement("div",{className:"repos-files-header-breadcrumb-container flex-grow flex-row scroll-hidden",onClick:this.onBreadcrumbContainerClicked},s.createElement(f.Breadcrumb,{className:"repos-files-header-breadcrumb flex-grow",key:r,items:a})))))}componentDidMount(){super.componentDidMount();this.context.pageContext.getService("IVssKeyboardShortcutService").registerShortcut(R.FilesShortcutGroup,{combos:["t"],description:R.PathShortcutDescription,action:()=>{this.dropdownRef.current?this.dropdownRef.current.focus():this.props.editMode.value=!0}})}componentWillUnmount(){super.componentWillUnmount();this.context.pageContext.getService("IVssKeyboardShortcutService").unRegisterShortcut(R.FilesShortcutGroup,"t")}getBreadcrumbClickHandler(e){return t=>{this.props.filesService.setSelectedPath(e),t.preventDefault()}}getPathDropdownItems(){const e=new o.ObservableCollection;if(this.props.canSearch){this.customSearching=!1,this.folderSearchItems=new o.ObservableArray;const t=this.props.filesService.getSelectedItem().value;if(t.isFolder){const e=this.props.filesService.getChildItems(t.path),s=()=>{e.ready&&(this.folderSearchItems.push(...e.value.map(this.gitItemToListBoxItem).filter(Boolean)),e.ready.unsubscribe(s))};e.ready.value?s():e.ready.subscribe(s)}else{const e=this.gitItemToListBoxItem(t);e&&this.folderSearchItems.push(e)}this.folderSearchItems.push({className:"repos-files-header-search-description",id:"search-description",text:R.HeaderSearchDescription,type:2}),e.push(this.folderSearchItems)}return this.dropdownCollection=e,this.dropdownCollection}}t[e].FilesEditableBreadcrumb=a;class l extends s.Component{constructor(){super(...arguments),this.focusTextField=()=>{const e=this.props.expandableRef.current;e&&(e.select(),e.focus())},this.onChange=(e,t)=>{this.props.onChange&&this.props.onChange(e,t),this.props.onUserEdit()}}render(){return s.createElement(g.DropdownExpandableTextField,Object.assign({},this.props,{prefixIconProps:{render:e=>s.createElement("div",{className:(0,S.css)(e,"flex-row flex-center"),onClick:this.focusTextField},s.createElement(n.Icon,{className:"bolt-breadcrumb-item-icon icon-only cursor-pointer",iconName:"FabricFolder"}),s.createElement("div",{className:"bolt-breadcrumb-divider"},s.createElement("div",{className:"bolt-breadcrumb-forward-slash"},"/")))},hideDropdownIcon:!0,onChange:this.onChange}))}componentDidMount(){this.props.initialFocus&&this.focusTextField()}}}("ComponentsFilesEditableBreadcrumb"),function(e){t[e]={};t[e].FilesHeaderCommandBar=e=>{var t;const{filesService:r,item:n,saveTitle:a,screenSize:l}=e,c=null!==(t=e.webEditingEnabled)&&void 0!==t?t:new o.ObservableValue(!0);return s.createElement(i.Observer,{webEditingEnabled:c,editMode:r.getEditMode(),fileContent:r.getSelectedItemContent()},(e=>{const t=e.fileContent?e.fileContent.editContext:void 0;return s.createElement(F.TabProviderContext.Consumer,null,(d=>s.createElement(i.Observer,{dirty:!!t&&t.getIsDirty()},(m=>{const u=new o.ObservableCollection;if(e.editMode){if(t){const e=!m.dirty&&!n.isNewItem;u.push([{disabled:e,iconProps:{iconName:"Save"},id:"save",important:!0,onActivate:()=>{t.commit()},isPrimary:!e,text:a},m.dirty?{iconProps:{iconName:"Undo"},id:"revert",important:!0,onActivate:()=>{t.revert()},text:R.Revert}:{iconProps:{iconName:"Cancel"},id:"cancel",important:!0,onActivate:()=>{n.isNewItem?t.revert():r.setEditMode(!1)},text:R.Cancel}])}}else{const t=0!==l;d.commandBarItems&&u.push(d.commandBarItems),u.push(r.getCloneMenuItems(),(e=>Object.assign(Object.assign({},e),{important:t&&"/"===n.path&&"clone"===e.id}))),u.push(r.getItemMenuItems(n,["ms.vss-code-web.source-item-menu"],c.value),(s=>Object.assign(Object.assign({},s),{important:t&&("open-in-vs"===s.id||"/"!==n.path&&("new"===s.id||"edit"===s.id||"download"===s.id&&!(!e.fileContent||!e.fileContent.details.metadata.isImage)))})))}return s.createElement(i.Observer,{items:u},(e=>s.createElement(C.HeaderCommandBar,{className:"repos-files-header-commandbar",items:e.items})))}))))}))}}("ComponentsFilesHeaderCommandBar"),function(e){function a(e,t,s,o){o.width.value=s}t[e]={};const l=[{breakpoint:1,columnWidths:[160,90,-100]},{breakpoint:600,columnWidths:[250,150,-100]},{breakpoint:750,columnWidths:[350,150,-100]}];const c=[(e,t)=>e.isFolder===t.isFolder?(0,p.localeIgnoreCaseComparer)(e.name,t.name):e.isFolder?-1:1,(e,t)=>(e.lastCommit.value?e.lastCommit.value.date.getTime():0)-(t.lastCommit.value?t.lastCommit.value.date.getTime():0)],u=[new o.ObservableValue(void 0),new o.ObservableValue(void 0),new o.ObservableValue(void 0)];class h extends r.VssComponent{constructor(e,t){var l,c;super(e,t),this.sortOptions=new o.ObservableValue({columnIndex:0,order:0}),this.sortingBehavior=new d.ColumnSorting(((e,t)=>{this.sortOptions.value={columnIndex:e,order:t}})),this.columns=(l=e.filesService,c=e.commentsHeaderTitle,[{id:"name",name:R.Name,onSize:a,renderCell:(e,t,o,i)=>{let a=s.createElement(s.Fragment,null,s.createElement(n.Icon,Object.assign({},i.iconProps,{className:(0,r.css)("icon-margin font-size-ml",i.iconProps.className)})),s.createElement(m.Tooltip,{overflowOnly:!0},s.createElement("span",{className:"text-ellipsis"},i.name)));return i.isFolder&&(a=s.createElement(N.FileDropTarget,{className:"flex-grow flex-row",onDrop:e=>l.dropFiles(i,e)},a)),s.createElement(d.SimpleTableCell,{columnIndex:t,key:t,tableColumn:o},a)},sortProps:{ariaLabelAscending:R.SortByNameAsc,ariaLabelDescending:R.SortByNameDesc},width:new o.ObservableValue(300)},{id:"lastChange",name:R.LastChange,onSize:a,renderCell:(e,t,o,r)=>s.createElement(d.SimpleTableCell,{columnIndex:t,key:t,tableColumn:o},s.createElement(i.Observer,{commit:r.lastCommit},(e=>e.commit?s.createElement(x.Ago,{date:e.commit.date}):null))),sortProps:{ariaLabelAscending:R.SortByLastChangeAsc,ariaLabelDescending:R.SortByLastChangeDesc},width:new o.ObservableValue(150)},{id:"commits",name:c,renderCell:(e,t,o,n)=>s.createElement(i.Observer,{commit:n.lastCommit,key:t},(e=>s.createElement(d.SimpleTableCell,{columnIndex:t,tableColumn:o,contentClassName:(0,r.css)(e.commit&&"bolt-table-cell-content-with-link")},e.commit&&s.createElement(s.Fragment,null,s.createElement(E.Link,{href:e.commit.href,className:"repos-folder-list-commitId bolt-table-link monospaced-text"},e.commit.shortCommitId),s.createElement(m.Tooltip,{overflowOnly:!0,text:e.commit.comment+" - "+e.commit.name},s.createElement("span",{className:"text-ellipsis"},s.createElement("span",{className:"repos-folder-list-comment"},e.commit.comment)," ",s.createElement("span",{className:"secondary-text"},e.commit.name))))))),width:new o.ObservableValue(-100)},new d.ColumnMore((e=>({id:"list-sub-menu",items:l.getItemMenuItems(e,["ms.vss-code-web.source-item-menu","ms.vss-code-web.source-grid-item-menu"])})))])}render(){const{filesService:e}=this.props,t=e.getSelectedItem().value,o=e.getChildItems(t.path,!0);return s.createElement(y.PerformanceScenarioContext.Consumer,null,(r=>{const n=r.registerPendingWork("load-folder-list");return s.createElement(i.Observer,{ready:o.ready,items:o},(o=>{const{ready:r,items:a}=o;return s.createElement(s.Fragment,null,s.createElement(T.Card,{className:"bolt-table-card"},s.createElement(N.FileDropTarget,{onDrop:s=>e.dropFiles(t,s)},s.createElement(i.Observer,{sort:this.sortOptions},(e=>s.createElement(b,{columns:this.columns,items:a,filesService:this.props.filesService,onLoaded:n&&n.complete,parentPath:t.path,ready:r,sort:e.sort,sortBehavior:this.sortingBehavior}))))),s.createElement(f,{filesService:e,items:a,pageContext:this.context.pageContext}))}))}))}}t[e].FolderListing=h;const b=e=>{const{columns:t,items:o,onLoaded:r,ready:i,sort:n,sortBehavior:a}=e;s.useEffect((()=>{i&&r&&r()}));const m=i?new w.ArrayItemProvider((0,d.sortItems)(n.columnIndex,n.order,c,t,[...o])):new w.ArrayItemProvider(u);return s.createElement(d.Table,{ariaLabel:R.FilesTable,behaviors:[a],columns:t,itemProvider:m,onActivate:(t,s)=>{s.data&&(e.filesService.setSelectedItem(s.data),t.preventDefault())},role:"treegrid",selectableText:!0,showHeader:!0,tableBreakpoints:l})},f=e=>{const{filesService:t,items:o}=e,n=o.filter((e=>(0,p.equals)(e.name,"Readme.md",!0)))[0];if(!n)return null;const a=t.getUrlTransformer(n.path);return s.createElement(i.Observer,{content:t.getItemContent(n.path)},(e=>{let t="";return e.content&&(t=e.content.details.content),s.createElement(T.Card,{className:"no-padding repos-folder-list-readme-card",contentProps:{contentPadding:!1}},t?s.createElement(r.WrappedComponent,{wrappedType:"ms.vss-code-web.markdown-preview",dependencies:["ms.vss-code-web.markdown-preview-content","ms.vss-features.markdown-highlight-service"],wrappedProps:{className:"flex-grow",linkTransformer:a.transformLink,imageUrlTransformer:a.transformImage,linkParse:a.parseFilesHubUrl,rawContent:t}}):null)}))}}("ComponentsFolderListing"),function(e){t.FileEditContext={};t.FileEditContext.FileEditContext=class{constructor(e,t,s){this.isDirty=new o.ObservableValue(!1),this.originalContent=this.content=e,this.revertImpl=t,this.commitImpl=s}commit(){this.commitImpl(this.content)}getIsDirty(){return this.isDirty}getContent(){return this.content}revert(){this.revertImpl()}setContent(e,t){this.content=e,t&&(this.originalContent=e);const s=e!==this.originalContent;s!==this.isDirty.value&&(this.isDirty.value=s)}}}(),function(e){t.FilesHubFilterActionsService={};class o extends P.VssService{getActions(){return[{ariaLabel:R.ToggleFullScreenMode,iconProps:{render:e=>{const t=this.pageContext.getService("IVssLayoutManager");return s.createElement(i.Observer,{fullScreenMode:t.getFullScreenMode()},(t=>s.createElement(n.Icon,{className:(0,r.css)(e,"medium"),iconName:t.fullScreenMode?"BackToWindow":"FullScreen"})))}},id:"fullscreen",onActivate:()=>{const e=this.pageContext.getService("IVssLayoutManager");e.setFullScreenMode(!e.getFullScreenMode().value)},subtle:!0,tooltipProps:{text:R.ToggleFullScreenMode}}]}}P.Services.add("IFilesHubFilterActionsService",{serviceFactory:o})}(),t.FilesHubMenuItems={},t.FilesHubMenuItems.getItemCommonMenuItems=function(e,t,s,o){const r=[];return e&&(r.push({groupKey:"actions",iconProps:{iconName:"Add"},id:"new",subMenuProps:{id:"new-submenu",items:[{iconProps:{iconName:"Page"},id:"new-file",onActivate:o("newFile"),text:R.File},{iconProps:{iconName:"FabricFolder"},id:"new-folder",onActivate:o("newFolder"),text:R.Folder}]},text:R.New}),r.push({groupKey:"actions",iconProps:{iconName:"Upload"},id:"upload-files",onActivate:o("upload"),text:R.UploadFiles})),e||s||r.push({groupKey:"actions",iconProps:{iconName:"Edit"},id:"edit",onActivate:o("edit"),text:R.Edit}),t||(r.push({groupKey:"actions",iconProps:{iconName:"Rename"},id:"rename",onActivate:o("rename"),text:R.Rename}),r.push({groupKey:"actions",iconProps:{iconName:"Delete"},id:"delete",onActivate:o("delete"),text:R.Delete})),r},function(e){t.FilesHubTabs={};class s extends P.VssService{constructor(){super(...arguments),this.firstPartyTabPairs=[],this.onSelectedTabChanged=()=>{this.prefetchTabDependencies(),this.selectedTabId.value||this.processTabSelection(this.selectedItem.value,this.editMode.value)},this.onSelectedItemChanged=()=>{this.computeTabs()},this.onEditModeChanged=e=>{this.computeTabs(e)},this.onLoadedFoldersChanged=()=>{this.loadedFolders.length>0&&(this.computeTabs(),this.loadedFolders.unsubscribe(this.onLoadedFoldersChanged))}}_serviceStart(e){super._serviceStart(e);const t=this.getFilesHubService(e);this.selectedItem=t.getSelectedItem(),this.selectedItem.subscribe(this.onSelectedItemChanged),this.editMode=t.getEditMode(),this.editMode.subscribe(this.onEditModeChanged),this.loadedFolders=t.getLoadedFolders(),0===this.loadedFolders.length&&this.loadedFolders.subscribe(this.onLoadedFoldersChanged);const s=this.pageContext.getService("IPageStateHistoryService"),r=s.getProjectedState();this.selectedTabId=new o.ObservableValue(r._a||""),s.registerObservable(this.selectedTabId,"_a",0,(e=>"contents"===e?"":e),(e=>e||"")),this.firstPartyTabs=new o.ObservableArray,this.thirdPartyTabs=(0,L.getTabs)(e,"ms.vss-code-web.file-explorer-tabs"),this.computeTabs(),this.tabs=new o.ObservableCollection,this.tabs.push(this.firstPartyTabs),this.tabs.push(this.thirdPartyTabs),this.selectedTabId.subscribe(this.onSelectedTabChanged);const i=e.getService("IVssKeyboardShortcutService");i.registerShortcut(R.FilesShortcutGroup,{combos:["1"],description:R.Contents,action:()=>{this.setSelectedTabId("contents")}}),i.registerShortcut(R.FilesShortcutGroup,{combos:["2"],description:R.History,action:()=>{this.setSelectedTabId("history")}}),this.cleanup=()=>{i.unRegisterShortcut(R.FilesShortcutGroup,"1"),i.unRegisterShortcut(R.FilesShortcutGroup,"2")}}_serviceEnd(e){super._serviceEnd(e),this.selectedItem.unsubscribe(this.onSelectedItemChanged),this.editMode.unsubscribe(this.onEditModeChanged),this.loadedFolders.unsubscribe(this.onLoadedFoldersChanged),this.selectedTabId.unsubscribe(this.onSelectedTabChanged),this.cleanup()}getSelectedTabId(){return this.selectedTabId}getTabs(){return this.tabs}setSelectedTabId(e){this.selectedTabId.value=e}updateFirstPartyTabs(e,t){if(0===this.loadedFolders.length)return;const s=[];for(const o of this.getTabRegistrations()){const r=o.getTab(this.pageContext,e,t);if(r){const e={tab:r,registration:o};s.push(e)}}s.sort(((e,t)=>(e.tab.order||100)-(t.tab.order||100))),this.firstPartyTabPairs=s,this.firstPartyTabs.value=s.map((e=>e.tab))}processTabSelection(e,t,s){if(0!==this.loadedFolders.length&&this.firstPartyTabPairs.length){let o=this.firstPartyTabPairs.filter((s=>s.registration.isDefaultTab&&s.registration.isDefaultTab(this.pageContext,e,t,s.tab,this.selectedTabId.value)))[0];o||!s&&this.firstPartyTabPairs.some((e=>(0,p.equals)(this.selectedTabId.value,e.tab.id)))||(o=this.firstPartyTabPairs[0]),o&&o.tab.id!==this.selectedTabId.value&&(this.selectedTabId.value=o.tab.id)}}prefetchTabDependencies(){let e;for(const t of this.firstPartyTabPairs)if((0,p.equals)(t.tab.id,this.selectedTabId.value,!0)){e=t.registration;break}if(e&&e.dependencies){this.pageContext.getService("IVssContributionService").getContributionsAsync(e.dependencies)}}computeTabs(e){const t=this.selectedItem.value,s=this.editMode.value;this.updateFirstPartyTabs(t,s),this.processTabSelection(t,s,e),this.prefetchTabDependencies()}}t.FilesHubTabs.FilesHubTabsServiceBase=s}()}),["Resources","Annotate","Components/FileDropTarget","Components/FileExplorerTree","Components/FilesEditableBreadcrumb","Components/FilesHeaderCommandBar","Components/FolderListing","FileEditContext","FilesHubFilterActionsService","FilesHubMenuItems","FilesHubTabs"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-code-web.files-hub-common"}}));